                                                                                                                                                                                                                                                                                                                                             ##         .                                                                                     ## ## ##        ==                                                                                  ## ## ## ## ##    ===                                                                              /"""""""""""""""""\___/ ===                                                                       ~~~ {~~ ~~~~ ~~~ ~~~~ ~~~ ~ /  ===- ~~~                                                                     \______ o           __/                                                                                  \    \         __/                                                                                      \____\_______/                                                                                                                                                                                  docker is configured to use the default machine with IP 192.168.99.100                                 For help getting started, check out the docs at https://docs.docker.com                                                                                                                                                                                                                                              Start interactive shell                                                                                                                                                                                       Nurul Husna@LAPTOP-L2FHB7QB MINGW64 /c/Program Files/Docker Toolbox                                    $ cd ~                                                                                                                                                                                                        Nurul Husna@LAPTOP-L2FHB7QB MINGW64 ~                                                                  $ cd test                                                                                              bash: cd: test: No such file or directory                                                                                                                                                                     Nurul Husna@LAPTOP-L2FHB7QB MINGW64 ~                                                                  $ ls                                                                                                   '3D Objects'/           ntuser.dat.LOG2                                                                AppData/                NTUSER.DAT{48e5b65c-e841-11e9-aa30-54ab3a84bdf0}.TxR.0.regtrans-ms             'Application Data'@     NTUSER.DAT{48e5b65c-e841-11e9-aa30-54ab3a84bdf0}.TxR.1.regtrans-ms             bluej/                  NTUSER.DAT{48e5b65c-e841-11e9-aa30-54ab3a84bdf0}.TxR.2.regtrans-ms             code/                   NTUSER.DAT{48e5b65c-e841-11e9-aa30-54ab3a84bdf0}.TxR.blf                       Contacts/               NTUSER.DAT{48e5b65d-e841-11e9-aa30-54ab3a84bdf0}.TM.blf                        Cookies@                NTUSER.DAT{48e5b65d-e841-11e9-aa30-54ab3a84bdf0}.TMContainer00000000000000000001.regtrans-ms                                                                                          Desktop/                NTUSER.DAT{48e5b65d-e841-11e9-aa30-54ab3a84bdf0}.TMContainer00000000000000000002.regtrans-ms                                                                                          Documents/              ntuser.ini                                                                     Downloads/              OneDrive/                                                                      Favorites/              PicStream/                                                                     IntelGraphicsProfiles/  Pictures/                                                                      'Lab 3 1.zip'           PrintHood@                                                                     Links/                  Recent@                                                                        'Local Settings'@       'Saved Games'/                                                                 MicrosoftEdgeBackups/   Searches/                                                                      Music/                  SendTo@                                                                        'My Documents'@         'Start Menu'@                                                                  NetHood@                Templates@                                                                     NTUSER.DAT              Videos/                                                                        ntuser.dat.LOG1                                                                                                                                                                                               Nurul Husna@LAPTOP-L2FHB7QB MINGW64 ~                                                                  $ cd code                                                                                                                                                                                                     Nurul Husna@LAPTOP-L2FHB7QB MINGW64 ~/code (master)                                                    $ ls                                                                                                   linkextractor/  test/                                                                                                                                                                                         Nurul Husna@LAPTOP-L2FHB7QB MINGW64 ~/code (master)                                                    $ cd test                                                                                                                                                                                                     Nurul Husna@LAPTOP-L2FHB7QB MINGW64 ~/code/test (master)                                               $ ls                                                                                                   api/  docker-compose.yml  instagram.py  packetsniffer.py  README.md  www/                                                                                                                                     Nurul Husna@LAPTOP-L2FHB7QB MINGW64 ~/code/test (master)                                               $ docker container ls                                                                                  CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES                                                                                                                                                                                        Nurul Husna@LAPTOP-L2FHB7QB MINGW64 ~/code/test (master)                                               $ cd api                                                                                                                                                                                                      Nurul Husna@LAPTOP-L2FHB7QB MINGW64 ~/code/test/api (master)                                           $ ls                                                                                                   Dockerfile  main.py*  requirements.txt  wikicrawler  wikicrawler.py*                                                                                                                                          Nurul Husna@LAPTOP-L2FHB7QB MINGW64 ~/code/test/api (master)                                           $ cat Dockerfile                                                                                       FROM       python:3                                                                                    LABEL      maintainer="compeng_husna"                                                                                                                                                                         ENV        REDIS_URL="redis://localhost:6379"                                                                                                                                                                 WORKDIR    /app                                                                                        COPY       requirements.txt /app/                                                                      RUN        pip install -r requirements.txt                                                                                                                                                                    COPY       *.py /app/                                                                                  RUN        chmod a+x *.py                                                                                                                                                                                     CMD        ["./main.py"]                                                                                                                                                                                      Nurul Husna@LAPTOP-L2FHB7QB MINGW64 ~/code/test/api (master)                                           $ cat main.py                                                                                          #!/usr/bin/env python                                                                                                                                                                                         import os                                                                                              import json                                                                                            import redis                                                                                           from flask import Flask                                                                                from flask import request                                                                              from wikicrawler import extract_links                                                                                                                                                                         app = Flask(__name__)                                                                                  redis_conn = redis.from_url(os.getenv("REDIS_URL", "redis://localhost:6379"))                                                                                                                                 @app.route("/")                                                                                        def index():                                                                                               return "Usage: http://<hostname>[:<prt>]/api/<url>"                                                                                                                                                       @app.route("/api/<path:url>")                                                                          def api(url):                                                                                              qs = request.query_string.decode("utf-8")                                                              if qs != "":                                                                                               url += "?" + qs                                                                                                                                                                                           jsonlinks = redis_conn.get(url)                                                                        if not jsonlinks:                                                                                          links = extract_links(url)                                                                             jsonlinks = json.dumps(links, indent=2)                                                                redis_conn.set(url, jsonlinks)                                                                                                                                                                            response = app.response_class(                                                                             status=200,                                                                                            mimetype="application/json",                                                                           response=jsonlinks                                                                                 )                                                                                                                                                                                                             return response                                                                                                                                                                                           app.run(host="0.0.0.0")                                                                                                                                                                                       Nurul Husna@LAPTOP-L2FHB7QB MINGW64 ~/code/test/api (master)                                           $ cat requirements.txt                                                                                 beautifulsoup4                                                                                         flask                                                                                                  redis                                                                                                  requests                                                                                               Wikipedia                                                                                                                                                                                                     Nurul Husna@LAPTOP-L2FHB7QB MINGW64 ~/code/test/api (master)                                           $ cat wikicrawler.py                                                                                   #!/usr/bin/env python                                                                                                                                                                                         import sys                                                                                             import requests                                                                                        import wikipedia                                                                                       from urllib.parse import urljoin                                                                                                                                                                              def extract_links(url):                                                                                        page = wikipedia.page(url)                                                                             links = []                                                                                                                                                                                            for link in page.links:                                                                                        links.append({"page":link})                                                                                                                                                                           return links                                                                                                                                                                                                  if __name__ == "__main__":                                                                             if len(sys.argv) != 2:                                                                                         print("\nUsage:\n\t{} <Search Word>\n".format(sys.argv[0]))                                            sys.exit(1)                                                                                    for link in extract_links(sys.argv[-1]):                                                                       print("[{}]".format(link["page"]))                                                                                                                                                                    Nurul Husna@LAPTOP-L2FHB7QB MINGW64 ~/code/test/api (master)                                           $ cd ..                                                                                                                                                                                                       Nurul Husna@LAPTOP-L2FHB7QB MINGW64 ~/code/test (master)                                               $ ls                                                                                                   api/  docker-compose.yml  instagram.py  packetsniffer.py  README.md  www/                                                                                                                                     Nurul Husna@LAPTOP-L2FHB7QB MINGW64 ~/code/test (master)                                               $ cat docker-compose.yml                                                                               version: '3'                                                                                                                                                                                                  services:                                                                                                api:                                                                                                     image: linkextractor-api:step5-python                                                                  build: ./api                                                                                           ports:                                                                                                   - "5000:5000"                                                                                        environment:                                                                                             - REDIS_URL=redis://redis:6379                                                                     web:                                                                                                     image: linkextractor-web:step5-php                                                                     build: ./www                                                                                           ports:                                                                                                   - "80:80"                                                                                            environment:                                                                                             - API_ENDPOINT=http://api:5000/api/                                                                redis:                                                                                                   image: redis                                                                                                                                                                                              Nurul Husna@LAPTOP-L2FHB7QB MINGW64 ~/code/test (master)                                               $ cd www                                                                                                                                                                                                      Nurul Husna@LAPTOP-L2FHB7QB MINGW64 ~/code/test/www (master)                                           $ ls                                                                                                   Dockerfile  index.php                                                                                                                                                                                         Nurul Husna@LAPTOP-L2FHB7QB MINGW64 ~/code/test/www (master)                                           $ cat Dockerfile                                                                                       FROM       php:7-apache                                                                                LABEL      maintainer="Sawood Alam <@ibnesayeed>"                                                                                                                                                             ENV        API_ENDPOINT="http://localhost:5000/api/"                                                                                                                                                          COPY       . /var/www/html/                                                                                                                                                                                   Nurul Husna@LAPTOP-L2FHB7QB MINGW64 ~/code/test/www (master)                                           $ cat index.php                                                                                        <!DOCTYPE html>                                                                                                                                                                                               <?php                                                                                                    $api_endpoint = $_ENV["API_ENDPOINT"] ?: "http://localhost:5000/api/";                                 $url = "";                                                                                             if(isset($_GET["url"]) && $_GET["url"] != "") {                                                          $url = $_GET["url"];                                                                                   $json = @file_get_contents($api_endpoint . $url);                                                      if($json == false) {                                                                                     $err = "Something is wrong with the URL: " . $url;                                                   } else {                                                                                                 $links = json_decode($json, true);                                                                     $domains = [];                                                                                         foreach($links as $link) {                                                                               array_push($domains, parse_url($link["href"], PHP_URL_HOST));                                        }                                                                                                      $domainct = @array_count_values($domains);                                                             arsort($domainct);                                                                                   }                                                                                                    }                                                                                                    ?>                                                                                                                                                                                                            <html>                                                                                                   <head>                                                                                                   <meta charset="utf-8">                                                                                 <title>Link Extractor</title>                                                                          <style media="screen">                                                                                   html {                                                                                                   background: #EAE7D6;                                                                                   font-family: sans-serif;                                                                             }                                                                                                      body {                                                                                                   margin: 0;                                                                                           }                                                                                                      h1 {                                                                                                     padding: 10px;                                                                                         margin: 0 auto;                                                                                        color: #EAE7D6;                                                                                        max-width: 600px;                                                                                    }                                                                                                      h1 a {                                                                                                   text-decoration: none;                                                                                 color: #EAE7D6;                                                                                      }                                                                                                      h2 {                                                                                                     background: #082E41;                                                                                   color: #EAE7D6;                                                                                        margin: -10px;                                                                                         padding: 10px;                                                                                       }                                                                                                      p {                                                                                                      margin: 25px 5px 5px;                                                                                }                                                                                                      section {                                                                                                max-width: 600px;                                                                                      margin: 10px auto;                                                                                     padding: 10px;                                                                                         border: 1px solid #082E41;                                                                           }                                                                                                      div.header {                                                                                             background: #082E41;                                                                                   margin: 0;                                                                                           }                                                                                                      div.footer {                                                                                             background: #082E41;                                                                                   margin: 0;                                                                                             padding: 5px;                                                                                        }                                                                                                      .footer p {                                                                                              margin: 0 auto;                                                                                        max-width: 600px;                                                                                      color: #EAE7D6;                                                                                        text-align: center;                                                                                  }                                                                                                      .footer p a {                                                                                            color: #24C2CB;                                                                                        text-decoration: none;                                                                               }                                                                                                      .error {                                                                                                 color: #DA2536;                                                                                      }                                                                                                      form {                                                                                                   display: flex;                                                                                       }                                                                                                      input {                                                                                                  font-size: 20px;                                                                                       padding: 3px;                                                                                          height: 40px;                                                                                        }                                                                                                      input.text {                                                                                             box-sizing:border-box;                                                                                 flex-grow: 1;                                                                                          border-color: #082E41;                                                                               }                                                                                                      input.button {                                                                                           width: 150px;                                                                                          background: #082E41;                                                                                   border-color: #082E41;                                                                                 color: #EAE7D6;                                                                                      }                                                                                                      table {                                                                                                  width: 100%;                                                                                           text-align: left;                                                                                      margin-top: 10px;                                                                                    }                                                                                                      table th, table td {                                                                                     padding: 3px;                                                                                        }                                                                                                      table th:last-child, table td:last-child {                                                               width: 70px;                                                                                           text-align: right;                                                                                   }                                                                                                      table th {                                                                                               border-top: 1px solid #082E41;                                                                         border-bottom: 1px solid #082E41;                                                                    }                                                                                                      table tr:last-child td {                                                                                 border-top: 1px solid #082E41;                                                                         border-bottom: 1px solid #082E41;                                                                    }                                                                                                    </style>                                                                                             </head>                                                                                                <body>                                                                                                   <div class="header">                                                                                     <h1><a href="/">Link Extractor</a></h1>                                                              </div>                                                                                                                                                                                                        <section>                                                                                                <form action="/">                                                                                        <input class="text" type="text" name="url" placeholder="http://example.com/" value="<?php echo $url; ?>">                                                                                                     <input class="button" type="submit" value="Extract Links">                                           </form>                                                                                              </section>                                                                                                                                                                                                    <?php if(isset($err)): ?>                                                                                <section>                                                                                                <h2>Error</h2>                                                                                         <p class="error"><?php echo $err; ?></p>                                                             </section>                                                                                           <?php endif; ?>                                                                                                                                                                                               <?php if($url != "" && !isset($err)): ?>                                                                 <section>                                                                                                <h2>Summary</h2>                                                                                       <p>                                                                                                      <strong>Page:</strong> <?php echo "<a href=\"" . $url . "\">" . $url . "</a>"; ?>                    </p>                                                                                                   <table>                                                                                                  <tr>                                                                                                     <th>Domain</th>                                                                                        <th># Links</th>                                                                                     </tr>                                                                                                  <?php                                                                                                    foreach($domainct as $key => $value) {                                                                   echo "<tr>";                                                                                           echo "<td>" . $key . "</td>";                                                                          echo "<td>" . $value . "</td>";                                                                        echo "</tr>";                                                                                        }                                                                                                    ?>                                                                                                     <tr>                                                                                                     <td><strong>Total</strong></td>                                                                        <td><strong><?php echo count($links); ?></strong></td>                                               </tr>                                                                                                </table>                                                                                             </section>                                                                                                                                                                                                    <section>                                                                                                <h2>Links</h2>                                                                                         <ul>                                                                                                   <?php                                                                                                    foreach($links as $link) {                                                                               echo "<li><a href=\"" . $link["href"] . "\">" . $link["text"] . "</a></li>";                         }                                                                                                    ?>                                                                                                     </ul>                                                                                                </section>                                                                                           <?php endif; ?>                                                                                                                                                                                               <div class="footer">                                                                                     <p><a href="https://github.com/ibnesayeed/linkextractor">Link Extractor</a> by <a href="https://twitter.com/ibnesayeed">@ibnesayeed</a> from                                                                    <a href="https://ws-dl.cs.odu.edu/">WS-DL, ODU</a>                                                   </p>                                                                                                 </div>                                                                                               </body>                                                                                              </html>                                                                                                                                                                                                       Nurul Husna@LAPTOP-L2FHB7QB MINGW64 ~/code/test/www (master)                                           $ cd..                                                                                                 bash: cd..: command not found                                                                                                                                                                                 Nurul Husna@LAPTOP-L2FHB7QB MINGW64 ~/code/test/www (master)                                           $ cd ..                                                                                                                                                                                                       Nurul Husna@LAPTOP-L2FHB7QB MINGW64 ~/code/test (master)                                               $ ls                                                                                                   api/  docker-compose.yml  instagram.py  packetsniffer.py  README.md  www/                                                                                                                                     Nurul Husna@LAPTOP-L2FHB7QB MINGW64 ~/code/test (master)                                               $ touch docker-compose.yml                                                                                                                                                                                    Nurul Husna@LAPTOP-L2FHB7QB MINGW64 ~/code/test (master)                                               $ docker-compose up -d --build                                                                         Building api                                                                                           Step 1/9 : FROM       python:3                                                                          ---> f88b2f81f83a                                                                                     Step 2/9 : LABEL      maintainer="compeng_husna"                                                        ---> Using cache                                                                                       ---> c1296cbf7cb1                                                                                     Step 3/9 : ENV        REDIS_URL="redis://localhost:6379"                                                ---> Using cache                                                                                       ---> 38769cc75c5b                                                                                     Step 4/9 : WORKDIR    /app                                                                              ---> Using cache                                                                                       ---> 5df1798ff258                                                                                     Step 5/9 : COPY       requirements.txt /app/                                                            ---> Using cache                                                                                       ---> 56f637576228                                                                                     Step 6/9 : RUN        pip install -r requirements.txt                                                   ---> Using cache                                                                                       ---> d4365483fb0f                                                                                     Step 7/9 : COPY       *.py /app/                                                                        ---> Using cache                                                                                       ---> a2694ab6181e                                                                                     Step 8/9 : RUN        chmod a+x *.py                                                                    ---> Using cache                                                                                       ---> f912f3e3def6                                                                                     Step 9/9 : CMD        ["./main.py"]                                                                     ---> Using cache                                                                                       ---> 3e385b95fa6c                                                                                     Successfully built 3e385b95fa6c                                                                        Successfully tagged linkextractor-api:step5-python                                                     Building web                                                                                           Step 1/4 : FROM       php:7-apache                                                                      ---> d753d5b380a1                                                                                     Step 2/4 : LABEL      maintainer="Sawood Alam <@ibnesayeed>"                                            ---> Using cache                                                                                       ---> c9bd01ab2f9b                                                                                     Step 3/4 : ENV        API_ENDPOINT="http://localhost:5000/api/"                                         ---> Using cache                                                                                       ---> af0c5ce13800                                                                                     Step 4/4 : COPY       . /var/www/html/                                                                  ---> Using cache                                                                                       ---> 16f83d4c3183                                                                                     Successfully built 16f83d4c3183                                                                        Successfully tagged linkextractor-web:step5-php                                                        Starting test_redis_1 ... done                                                                         Starting test_web_1   ... done                                                                         Starting test_api_1   ... done                                                                                                                                                                                Nurul Husna@LAPTOP-L2FHB7QB MINGW64 ~/code/test (master)                                               $ docker container ls                                                                                  CONTAINER ID        IMAGE                            COMMAND                  CREATED             STATUS              PORTS                    NAMES                                                          059536f641fd        linkextractor-api:step5-python   "./main.py"              8 days ago          Up 16 seconds       0.0.0.0:5000->5000/tcp   test_api_1                                                     e9d88a617fd0        linkextractor-web:step5-php      "docker-php-entrypoi…"   8 days ago          Up 16 seconds       0.0.0.0:80->80/tcp       test_web_1                                                     37d9b654281e        redis                            "docker-entrypoint.s…"   8 days ago          Up 17 seconds       6379/tcp                 test_redis_1                                                                                                                                                          Nurul Husna@LAPTOP-L2FHB7QB MINGW64 ~/code/test (master)                                               $ touch docker-compose.yml                                                                                                                                                                                    Nurul Husna@LAPTOP-L2FHB7QB MINGW64 ~/code/test (master)                                               $ vim docker-compose.yml                                                                               
Nurul Husna@LAPTOP-L2FHB7QB MINGW64 ~/code/test (master)
$ cat docker-compose.yml
version: '3'

services:
  api:
    image: wikicrawler-api:step5-python
    build: ./api
    ports:
      - "5000:5000"
    environment:
      - REDIS_URL=redis://redis:6379
  web:
    image: wikicrawler-web:step5-php
    build: ./www
    ports:
      - "80:80"
    environment:
      - API_ENDPOINT=http://api:5000/api/
  redis:
    image: redis

Nurul Husna@LAPTOP-L2FHB7QB MINGW64 ~/code/test (master)
$ docker-compose up -d --build
Building api
Step 1/9 : FROM       python:3
 ---> f88b2f81f83a
Step 2/9 : LABEL      maintainer="compeng_husna"
 ---> Using cache
 ---> c1296cbf7cb1
Step 3/9 : ENV        REDIS_URL="redis://localhost:6379"
 ---> Using cache
 ---> 38769cc75c5b
Step 4/9 : WORKDIR    /app
 ---> Using cache
 ---> 5df1798ff258
Step 5/9 : COPY       requirements.txt /app/
 ---> Using cache
 ---> 56f637576228
Step 6/9 : RUN        pip install -r requirements.txt
 ---> Using cache
 ---> d4365483fb0f
Step 7/9 : COPY       *.py /app/
 ---> Using cache
 ---> a2694ab6181e
Step 8/9 : RUN        chmod a+x *.py
 ---> Using cache
 ---> f912f3e3def6
Step 9/9 : CMD        ["./main.py"]
 ---> Using cache
 ---> 3e385b95fa6c
Successfully built 3e385b95fa6c
Successfully tagged wikicrawler-api:step5-python
Building web
Step 1/4 : FROM       php:7-apache
 ---> d753d5b380a1
Step 2/4 : LABEL      maintainer="Sawood Alam <@ibnesayeed>"
 ---> Using cache
 ---> c9bd01ab2f9b
Step 3/4 : ENV        API_ENDPOINT="http://localhost:5000/api/"
 ---> Using cache
 ---> af0c5ce13800
Step 4/4 : COPY       . /var/www/html/
 ---> Using cache
 ---> 16f83d4c3183
Successfully built 16f83d4c3183
Successfully tagged wikicrawler-web:step5-php
Recreating test_web_1 ...
Recreating test_web_1 ... done                                                                         Recreating test_api_1 ... done                                                                         
Nurul Husna@LAPTOP-L2FHB7QB MINGW64 ~/code/test (master)
$ docker container ls
CONTAINER ID        IMAGE                       COMMAND                  CREATED             STATUS              PORTS                NAMES
7b1f5773ce1a        wikicrawler-web:step5-php   "docker-php-entrypoi…"   6 seconds ago       Up 6 seconds        0.0.0.0:80->80/tcp   test_web_1
37d9b654281e        redis                       "docker-entrypoint.s…"   8 days ago          Up 3 minutes        6379/tcp             test_redis_1

Nurul Husna@LAPTOP-L2FHB7QB MINGW64 ~/code/test (master)
$  cd ~/
